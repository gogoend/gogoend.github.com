<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./lib/vconsole.min.js"></script>
    <!-- <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=4woYXvjYCbrpX0jVGBO2Dy5SxLptnrBa"></script> -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.10&key=a250c70fdd65a748d68b74dddcc362ec"></script>

    <script></script>
    <script>var vConsole = new VConsole();</script>

    <title>Hello City</title>
</head>

<body>
    <div id="container"></div>
    <script type="text/javascript">
        var data = {}
        //调百度地图
        function baiduMap(place, rad) {
            var map = new BMap.Map("allmap"); // 创建Map实例
            //当前搜索中心点
            var mPoint = new BMap.Point(data.curPos.latitude, data.curPos.longitude);
            //这里添加了将搜索结果打印到控制台的函数
            var local = new BMap.LocalSearch(map, { renderOptions: { map: map, autoViewport: false }, onSearchComplete: function (e) { console.log(e) } });
            var result = local.searchNearby(placeName, mPoint, rad);//要查找的地点名称、中心点、半径
        }
        //调高德地图
        function aMap(place, rad) {
            var map = new AMap.Map("", { resizeEnable: true });

            AMap.service(["AMap.PlaceSearch"], function () {

                var placeSearch = new AMap.PlaceSearch({
                    type: place, // 兴趣点类别
                    pageSize: 20, // 单页显示结果条数
                    pageIndex: 1, // 页码
                    citylimit: true,  //是否强制限制在设置的城市内搜索
                    map: map, // 展现结果的地图实例
                    autoFitView: true // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围
                });

                var cPoint = [data.curPos.latitude, data.curPos.longitude];

                placeSearch.searchNearBy('', cPoint, rad, function (status, result) {
                    console.log(JSON.stringify(status));
                    console.log(JSON.stringify(result));
                });

            });

        };


        function positionHandler(pos) {
            data.curPos = {
                latitude: pos.coords.latitude,
                longitude: pos.coords.longitude,
                errCode: -1
            };
            console.log(data);
            aMap('卫生间', 2000);



        }
        function errorHandler(e) {
            console.log(e);
            data.curPos = {
                errCode: 0
            };
            console.log('没获取到位置。')

        }
        window.onload = function () {
            navigator.geolocation.getCurrentPosition(positionHandler, errorHandler)
        };
    </script>
</body>

</html>